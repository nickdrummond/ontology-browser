<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<!--suppress HtmlUnknownTag, GrazieInspection, XmlDuplicatedId, CheckTagEmptyBody, HtmlExtraClosingTag -->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">


<th:block th:fragment="includeTree">
    <link rel='stylesheet' type='text/css' href='/css/tree.css'
          th:href='@{/css/tree.css}'/>

    <script type='module' src='/js/tree.js'
            th:src='@{/js/tree.js}'>
    </script>
</th:block>
<body>

<li th:fragment="tree"
    th:if="${t != null}"
    th:classappend="${t.childCount > 0 ? 'with-children' + (!t.children.isEmpty() ? ' expanded' : '') : ''}"
>
    <span th:if='${t.childCount > 0}' class="node" th:data="${statsName}"></span>
    <span th:if='${t.childCount == 0}' class="node"></span>

    <div class="tree-node">
        <span th:each="synonym,iteratorStatus : ${t.value}" th:remove="tag">
            <span th:if="${iteratorStatus.index != 0}" class="keyword">&equiv;</span>
            <span th:utext="${mos.render(synonym)}" th:remove="tag">a thing</span>
        </span>

        <span class='child-count'
              th:if="${stats != null}"
              th:with="stat=${stats.getStats(t.value.getRepresentativeElement())},
                       pStat=${parent != null ? stats.getStats(parent.value.getRepresentativeElement()) : 0},
                       percent=${pStat > 0 ? (stat*100)/pStat : T(java.lang.Math).min(stat,100)}"
              th:styleappend="${stat > 0 ? 'width: ' + (6 + (2 * percent)) + 'px;' : ''}"
              th:utext='${stat > 0 ? stat : ""}'>10</span>
    </div>

    <ul th:replace="~{tree::children(${t})}">no children</ul>
</li>

<ul th:fragment="children (t)"
    th:if="${!t.children.isEmpty()}">
    <div class="removeme" th:each="child : ${t.children}" th:remove="tag">
        <li th:replace="~{tree :: tree(t=${child}, parent=${t})}"></li>
    </div>
</ul>

<div class='owlselector primary' th:fragment="hierarchy (title, hierarchy)" th:if="${hierarchy != null}">
    <h4 class="header">
        <span class="hide-trigger">
            <span class="title" th:text="${title}">Title</span>
        </span>
    </h4>
    <ul class="minihierarchy" th:classappend="${title}">
        <li th:replace="~{tree :: tree(t=${hierarchy})}">Top Thing</li>
    </ul>
</div>

<div class='owlselector secondary'
     th:fragment="secondaryhierarchy"
     th:if="${hierarchy2 != null}">

    <h4 class="header">
        <span class="hide-trigger">
            <span th:if="${inverse != null && inverse}" class="keyword">Inverse</span>
            <span class="title" th:text="${type2}">Title</span>
        </span>
        <a th:if="${inverse}" href="?" class="keyword">↪</a>
        <a th:if="${inverse != null && !inverse}" href="?inverse=true" class="keyword" title="Inverse">↩</a>
    </h4>

    <ul class="minihierarchy" th:classappend="${type2}" th:if="${!hierarchy2.children.isEmpty()}">
        <div class="removeme" th:each="child : ${hierarchy2.children}" th:remove="tag">
            <li th:replace="~{tree :: tree(t=${child}, parent=${hierarchy2}, stats=${stats2}, statsName=${statsName2})}"></li>
        </div>
    </ul>
</div>

<div class='owlselector primary' th:fragment="list (title, entities)" th:if="${entities != null}">
    <h4 class="header"><span class="title" th:text="${title}">Title</span></h4>
    <ul class="minihierarchy" th:classappend="${type}">
        <li th:each="entity : ${entities}" th:utext="${mos.render(entity)}">
            a thing
        </li>
    </ul>
</div>

<div id='direct' th:fragment="secondary"
     th:if="${direct != null}"
     class="owlselector secondary">

    <h4 class="header"
        th:with='name=${T(org.ontbrowser.www.feature.entities.characteristics.PagingUtils).getIdFor(direct.name)}'>
        <span class="hide-trigger">
            <span class="title" th:text='${direct.name}'>Some Characteristic</span>
        </span>
        <span th:replace="~{base::paged (${direct.getPageData()}, ${name})}">(2)</span>
    </h4>

    <ul th:remove="all-but-first"
        th:class="minihierarchy">
        <li class="asserted"
            th:each="object : ${direct.objects}">
                <span class="owlobject"
                      th:with="data=${object.owlAxiom() != null ? object.owlAxiom() : object.owlObject()}"
                      th:data="${mos.renderAsPlainString(data)}"
                      th:utext="${mos.render(object.owlObject())}">
                    individual
                </span>
        </li>
    </ul>
</div>
</html>